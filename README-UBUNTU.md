# RedNote-AutoGen Ubuntu一键启动指南

本文档提供了在Ubuntu系统上一键打包并启动RedNote-AutoGen项目的指南。

## 脚本说明

`start-rednote.sh`是为Ubuntu系统设计的一键启动脚本，它能够自动完成以下任务：

1. 检查必要的依赖（Node.js、npm）
2. 安装项目依赖
3. 检查并启动图像生成服务（OneClickFluxGen）
4. 更新环境配置
5. 构建项目
6. 在指定端口启动服务

## 使用方法

### 步骤1：获取脚本权限

首先，确保脚本具有执行权限：

```bash
chmod +x start-rednote.sh
```

### 步骤2：执行脚本

有多种方式执行脚本：

#### 使用默认配置

使用默认配置启动（前端端口3000，图像服务端口8000）：

```bash
./start-rednote.sh
```

#### 指定前端端口

指定前端服务的端口（例如4000）：

```bash
./start-rednote.sh 4000
```

#### 指定前端和图像服务端口

同时指定前端端口和图像服务端口：

```bash
./start-rednote.sh 4000 9000
```

#### 查看帮助

显示使用帮助：

```bash
./start-rednote.sh --help
```

## 注意事项

1. **系统要求**：
   - Ubuntu或其他Linux系统
   - Node.js 16.0.0或更高版本
   - npm包管理器
   - git（用于克隆图像服务，如果尚未安装）

2. **网络要求**：
   - 确保您的系统能够访问npm仓库以安装依赖
   - 如果需要克隆图像服务，请确保能够访问GitHub

3. **端口占用**：
   - 确保指定的端口未被其他服务占用
   - 如果端口被占用，可以使用脚本参数指定其他可用端口

4. **环境配置**：
   - 脚本会自动更新`.env`文件中的图像服务URL配置
   - 原始的`.env`文件会被备份为`.env.backup`

5. **图像服务**：
   - 如果图像服务已经运行，脚本将检测到并跳过启动步骤
   - 如果图像服务未安装，脚本将尝试从GitHub克隆
   - 如果无法启动图像服务，项目将以无图像生成功能的模式启动

## 常见问题排查

1. **依赖安装失败**：
   - 检查网络连接
   - 尝试手动运行`npm install`查看详细错误信息

2. **图像服务无法启动**：
   - 检查`Image-AutoGenService`目录是否存在
   - 查看图像服务的`start.sh`脚本是否有执行权限
   - 尝试手动启动图像服务排查问题

3. **端口被占用**：
   - 使用`lsof -i :端口号`检查端口占用情况
   - 关闭占用端口的进程或使用其他端口重新启动脚本

4. **权限问题**：
   - 确保您有足够的权限执行脚本和安装依赖
   - 如果遇到权限问题，尝试使用`sudo`执行相关命令

## 联系与支持

如果您在使用过程中遇到任何问题，请联系RedNote团队：

邮箱：xdrshjr@gmail.com 